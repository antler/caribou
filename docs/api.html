<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <script type="text/javascript" src="js/shCore.js"></script>
    <script type="text/javascript" src="js/shBrushClojure.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/shCore.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/shThemeFadeToGrey.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/shClojureExtra.css" media="screen" />

    <title>Caribou Documentation</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Caribou Documentation</h1>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
<h1>Using the API</h1><p>The API is already running when you fire up a Caribou project.  Its function is to make available all the content in your system as json, xml or csv.  Every time a model is created, a corresponding API for that model is instantly available.</p><h2>All Content is Accessible from the API</h2><p>Once a new model is created, any instances of that model can be accessed at a URL of the form:</p><pre>
http://localhost:33333/&#95;api/{model-name}
</pre><p>So, to access the Model API, simply navigate to http://localhost:33333/_api/model .  You will see a json representation of every model in the system.  If you want a specific representation, add it as a file extension to this basic URL structure:</p><pre>
http://localhost:33333/&#95;api/model.json
http://localhost:33333/&#95;api/model.xml
http://localhost:33333/&#95;api/model.csv
</pre><h2>Options in the API</h2><p>All the options you would pass into a <code>caribou.model/gather</code> are available in the API.  Add any additional constraints as query parameters to refine your selection:</p><pre>
http://localhost:33333/&#95;api/model?include=fields&amp;limit=2
</pre><h2>Changing the API root or removing the API</h2><p>The routes for the API are added in your <code>{project}.core</code> namespace in the call to <code>{project}.core/reload-pages</code>.  It will look something like this:</p><pre class="brush: clj">
&#40;defn reload-pages
  &#91;&#93;
  &#40;pages/add-page-routes
   admin-routes/admin-routes
   'caribou.admin.controllers
   &quot;/&#95;admin&quot;
   admin-core/admin-wrapper&#41;

  &#40;pages/add-page-routes
   api-routes/api-routes
   'caribou.api.controllers
   &quot;/&#95;api&quot;
   api-core/api-wrapper&#41;

  &#40;pages/add-page-routes
   &#40;pages/all-pages&#41;
   &#40;config/draw :controller :namespace&#41;&#41;&#41;
</pre><p>As you can see, the Admin is loaded first, then the API.  If you want to change where the API is located, just change the string "/_api" to your desired API root.  And if you don't want the API enabled at all, simply remove the whole <code>pages/add-page-routes</code> call to add the API routes.</p>
      </section>
    </div>

    
  </body>
</html>

<script type="text/javascript">
  SyntaxHighlighter.config.gutter = false;
  SyntaxHighlighter.config.toolbar = false;
  SyntaxHighlighter.all()
</script>
