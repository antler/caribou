<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>let-caribou-in - Powered By Caribou</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Source Sans Pro:300,400,700">
    <link href="//let-caribou.in/css/let-caribou-in.css" type="text/css" rel="stylesheet">
    <link href="/caribou/docs/stylesheets/styles.css" type="text/css" rel="stylesheet">
    <link href="/caribou/docs/highlight/styles/rainbow.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="/caribou/docs/highlight/highlight.pack.js"></script>
    <link rel="shortcut icon" href="favicon.ico">
  </head>

  <body>
    <header>
      <img src="//let-caribou.in/img/caribou-logo.png" width="158" height="139">
      <h2><a href="outline.html">Documentation</a></h2>
    </header>
    <div class="container">
      <div class="grid-block">
        <div class="col-6">
<h1>Using the API</h1><p>The API is already running when you fire up a Caribou project.  Its function is to make available all the content in your system as json, xml or csv.  Every time a model is created, a corresponding API for that model is instantly available.</p><h2>All Content is Accessible from the API</h2><p>Once a new model is created, any instances of that model can be accessed at a URL of the form:</p><pre class="brush: txt">
http://localhost:33333/&#95;api/{model-name}
</pre><p>So, to access the Model API, simply navigate to http://localhost:33333/_api/model .  You will see a json representation of every model in the system.  If you want a specific representation, add it as a file extension to this basic URL structure:</p><pre class="brush: txt">
http://localhost:33333/&#95;api/model.json
http://localhost:33333/&#95;api/model.xml
http://localhost:33333/&#95;api/model.csv
</pre><h2>Options in the API</h2><p>All the options you would pass into a <code>caribou.model/gather</code> are available in the API.  Add any additional constraints as query parameters to refine your selection:</p><pre class="brush: txt">
    http://localhost:33333/&#95;api/model?include=fields&amp;limit=2
</pre><h2>Changing the API root or removing the API</h2><p>The routes for the API are added in your <code>{project}.core</code> namespace in the call to <code>{project}.core/reload-pages</code>.  It will look something like this:</p><pre class="brush: clj">
&#40;defn reload-pages
  &#91;&#93;
  &#40;pages/add-page-routes
    admin-routes/admin-routes
    'caribou.admin.controllers
    &quot;/&#95;admin&quot;
    admin-core/admin-wrapper&#41;

  &#40;pages/add-page-routes
    api-routes/api-routes
    'caribou.api.controllers
    &quot;/&#95;api&quot;
    api-core/api-wrapper&#41;

  &#40;pages/add-page-routes
   &#40;pages/all-pages&#41;
   &#40;config/draw :controller :namespace&#41;&#41;&#41;
</pre><p>As you can see, the Admin is loaded first, then the API.  If you want to change where the API is located, just change the string "/_api" to your desired API root.  And if you don't want the API enabled at all, simply remove the whole <code>pages/add-page-routes</code> call to add the API routes.</p>        </div>
      </div>
    </div>
    <footer>
        <a href="http://caribou.github.io/caribou/docs/outline.html" target="_blank"><img src="//let-caribou.in/img/teepee_golden.svg"></a>
    </footer>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
      $('pre').each(function(i, e) {
          var $e = $(e);
          if ($e.hasClass("clj") || $(e).hasClass("bash") || $e.hasClass("javascript") ||
              $e.hasClass("html") || $(e).hasClass("handlebars") || $(e).hasClass("txt")) {
              $e.html("<code>" + $e.html() + "</code>");
          }
          hljs.highlightBlock(e)
      });
    });
    </script>
    <!-- <script type="text/javascript" src="/js/let-caribou-in.js"></script> -->
    <!-- script type="text/javascript" src="/js/app/out/goog/base.js"></script -->
    <!-- script type="text/javascript" src="/js/app/let-caribou-in.js"></script -->
    <!-- script type="text/javascript">goog.require('let-caribou-in');</script -->
  </body>
</html>
